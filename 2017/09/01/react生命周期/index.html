<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <link rel="stylesheet" href="/style/style.css">
<script>
    var NlviConfig = {
        title: "Pororo's blog",
        author: "Pororo",
        theme: "banderole",
        lightbox: true,
        animate: true,
        baseUrl: "/",
        search: true
    }
</script>



    <link rel="stylesheet" href="/script/lib/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/syuanpi/syuanpi.min.css">




    <link rel="icon" href="/images/favicon.ico">






    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Pororo's blog">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />

  <link rel="apple-touch-icon"  sizes="72x72"  href="/images/favicon.ico">
  <link rel="apple-touch-icon-precomposed"  sizes="72x72"  href="/images/favicon.ico">



  <meta name="description" content="现在的我可能不那么优秀，但可以从现在开始努力变得优秀。">



  <meta name="keywords" content="React生命周期, Nlvi" />

  <title> react生命周期 · Pororo's blog </title>
</head>
<body>
  <div class="progress">
  <div class="progress-inner"></div>
</div>
  
  
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
  <div class="tagcloud-inner">
    <a href="/tags/Ajax/" style="font-size: 14px;">Ajax</a> <a href="/tags/CSS层叠规则/" style="font-size: 14px;">CSS层叠规则</a> <a href="/tags/Comet/" style="font-size: 14px;">Comet</a> <a href="/tags/DOM/" style="font-size: 14px;">DOM</a> <a href="/tags/Diff/" style="font-size: 14px;">Diff</a> <a href="/tags/HOC/" style="font-size: 14px;">HOC</a> <a href="/tags/HTML5/" style="font-size: 14px;">HTML5</a> <a href="/tags/HTML5，DOM/" style="font-size: 14px;">HTML5，DOM</a> <a href="/tags/Promise串行执行/" style="font-size: 14px;">Promise串行执行</a> <a href="/tags/React生命周期/" style="font-size: 14px;">React生命周期</a> <a href="/tags/apply/" style="font-size: 14px;">apply</a> <a href="/tags/bind/" style="font-size: 14px;">bind</a> <a href="/tags/call/" style="font-size: 14px;">call</a> <a href="/tags/form/" style="font-size: 14px;">form</a> <a href="/tags/react/" style="font-size: 14px;">react</a> <a href="/tags/setState/" style="font-size: 14px;">setState</a> <a href="/tags/this/" style="font-size: 14px;">this</a> <a href="/tags/作用域链/" style="font-size: 14px;">作用域链</a> <a href="/tags/变量对象/" style="font-size: 14px;">变量对象</a> <a href="/tags/定位导航/" style="font-size: 14px;">定位导航</a> <a href="/tags/执行上下文/" style="font-size: 14px;">执行上下文</a> <a href="/tags/执行上下文栈/" style="font-size: 14px;">执行上下文栈</a> <a href="/tags/算法/" style="font-size: 14px;">算法</a> <a href="/tags/节流/" style="font-size: 14px;">节流</a> <a href="/tags/运算符类型转换/" style="font-size: 14px;">运算符类型转换</a> <a href="/tags/闭包/" style="font-size: 14px;">闭包</a> <a href="/tags/防抖/" style="font-size: 14px;">防抖</a>
  </div>
</div>  
  

  <div class="container">

    <header class="header" id="header">
  <div class="header-wrapper">
    <div class="logo">
  <div class="logo-inner syuanpi tvIn">
    <span><a href="/">Pororo's blog</a></span>
    
  </div>
</div>
    <nav class="main-nav">
        
  <ul class="main-nav-list syuanpi tvIn">
  
    <li class="menu-item">
      <a href="javascript:;" id="search">
        <span>搜索</span>
        
          <span class="menu-item-label">search</span>
        
      </a>
    </li>
  
  
    
      
    
    <li class="menu-item">
      <a href="/" id="article">
        <span class="base-name">文章</span>
        
          <span class="menu-item-label">article</span>
        
      </a>
    </li>  
  
    
      
    
    <li class="menu-item">
      <a href="/archives" id="archives">
        <span class="base-name">归档</span>
        
          <span class="menu-item-label">archives</span>
        
      </a>
    </li>  
  
    
      
    
    <li class="menu-item">
      <a href="javascript:;" id="tags">
        <span class="base-name">标签</span>
        
          <span class="menu-item-label">tags</span>
        
      </a>
    </li>  
  
  </ul>
  
</nav>
    
    
  </div>
</header>
<div class="mobile-header">
  <div class="mobile-header-body">
    <div class="mobile-header-list">
      
        
            <div class="mobile-nav-item">
                <a href="/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </div>
        
      
        
            <div class="mobile-nav-item">
                <a href="/archives">
                    <span>归档</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </div>
        
      
        
          <div class="mobile-nav-item inner-cloud">
            <div class="mobile-nav-tag">
              <a href="javascript:;" id="mobile-tags">
                <span>标签</span>
                
                    <span class="menu-item-label">tags</span>
                
              </a>
            </div>
            <div class="mobile-nav-tagcloud">
              <div class="mobile-tagcloud-inner">
                <a href="/tags/Ajax/" style="font-size: 14px;">Ajax</a> <a href="/tags/CSS层叠规则/" style="font-size: 14px;">CSS层叠规则</a> <a href="/tags/Comet/" style="font-size: 14px;">Comet</a> <a href="/tags/DOM/" style="font-size: 14px;">DOM</a> <a href="/tags/Diff/" style="font-size: 14px;">Diff</a> <a href="/tags/HOC/" style="font-size: 14px;">HOC</a> <a href="/tags/HTML5/" style="font-size: 14px;">HTML5</a> <a href="/tags/HTML5，DOM/" style="font-size: 14px;">HTML5，DOM</a> <a href="/tags/Promise串行执行/" style="font-size: 14px;">Promise串行执行</a> <a href="/tags/React生命周期/" style="font-size: 14px;">React生命周期</a> <a href="/tags/apply/" style="font-size: 14px;">apply</a> <a href="/tags/bind/" style="font-size: 14px;">bind</a> <a href="/tags/call/" style="font-size: 14px;">call</a> <a href="/tags/form/" style="font-size: 14px;">form</a> <a href="/tags/react/" style="font-size: 14px;">react</a> <a href="/tags/setState/" style="font-size: 14px;">setState</a> <a href="/tags/this/" style="font-size: 14px;">this</a> <a href="/tags/作用域链/" style="font-size: 14px;">作用域链</a> <a href="/tags/变量对象/" style="font-size: 14px;">变量对象</a> <a href="/tags/定位导航/" style="font-size: 14px;">定位导航</a> <a href="/tags/执行上下文/" style="font-size: 14px;">执行上下文</a> <a href="/tags/执行上下文栈/" style="font-size: 14px;">执行上下文栈</a> <a href="/tags/算法/" style="font-size: 14px;">算法</a> <a href="/tags/节流/" style="font-size: 14px;">节流</a> <a href="/tags/运算符类型转换/" style="font-size: 14px;">运算符类型转换</a> <a href="/tags/闭包/" style="font-size: 14px;">闭包</a> <a href="/tags/防抖/" style="font-size: 14px;">防抖</a>
              </div>
            </div>
          </div>
        
      
    </div>
  </div>
  <div class="mobile-header-nav">
    <div class="mobile-header-item" id="mobile-left">
      <div class="header-menu-item">
        <span class="header-menu-line"></span>
      </div>
    </div>
    <h1 class="mobile-header-title">
      <a href="/">Pororo's blog</a>
    </h1>
    <div class="mobile-header-item"></div>
  </div>
</div>
    <div class="container-inner">
      <main class="main" id="main">
        <div class="main-wrapper">
          
    
  <article class="
  post
   is_post 
  ">
    <header class="post-header">
      <div class="post-time syuanpi riseIn-light back-1">
        <div class="post-time-wrapper">
          <span>2017-09-01</span>
          
            
              <span class="post-category"><a href="/categories/React/">React</a></span>
            
          
          
            
              <aside class="post-tags syuanpi riseIn-light back-3">
              
                <a href="/tags/React生命周期/">React生命周期</a>
              
              </aside>
            
          
        </div>
      </div>
      <h1 class="post-title syuanpi riseIn-light back-2">
        
          react生命周期
        
      </h1>
    </header>
    <div class="post-content syuanpi riseIn-light back-3">
      
        <p>每个react组件的生命周期分为三部分：实例化、存在期、销毁期。不同时期都有一些方法被调用，在接触react初期对于这些方法的使用可能并不频繁，但随着项目体积的增大，使用一些必要的生命周期方法就显得尤为重要了。</p>
<h1 id="实例化阶段"><a href="#实例化阶段" class="headerlink" title="实例化阶段"></a>实例化阶段</h1><p>实例化阶段又分为客户端和服务端</p>
<a id="more"></a>
<h2 id="1-getDefaultProps"><a href="#1-getDefaultProps" class="headerlink" title="1. getDefaultProps"></a>1. getDefaultProps</h2><p>设置 props 的默认数据，通常情况下组件都会定义部分默认数据，这样调用组件时可以不用将每一个参数都设置一遍。所有的实例化，只调用一次。</p>
<pre><code class="javascript">    getDefaultProps(){
        return {
            name : &quot;auto&quot;
        };
    }
</code></pre>
<h2 id="2-getInitialState"><a href="#2-getInitialState" class="headerlink" title="2. getInitialState"></a>2. getInitialState</h2><p>对于组件的每个实例来说，这个方法的调用有且只有一次，用来初始化每个实例的 state，在这个方法里，可以访问组件的 props。state只存在组件的内部，props 在所有实例中共享。</p>
<pre><code class="javascript">    getInitialState(){
        return {
            name : &quot;auto&quot;
        };
    }
</code></pre>
<p>每次修改 state，都会重新渲染组件，实例化后通过 state 更新组件，会依次调用下列方法：</p>
<ol>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>render</li>
<li>componentDidUpdate</li>
</ol>
<p>所以通过this.setState来改变state</p>
<h2 id="3-componentWillMount"><a href="#3-componentWillMount" class="headerlink" title="3. componentWillMount"></a>3. componentWillMount</h2><p>在第一次渲染之前调用，也是在 render 方法调用之前修改 state 的最后一个机会。</p>
<h2 id="4-render"><a href="#4-render" class="headerlink" title="4. render"></a>4. render</h2><p>会生成虚拟DOM，展示组件。（虚拟DOM显示的并不是一个真正的DOM，尽量避免DOM操作）<br>该方法的正确调用必须满足以下几点：</p>
<ol>
<li>只能通过this.props和this.state来访问数据</li>
<li>可以返回一个组件或者null或false</li>
<li>只能返回一个组件，即return内所有元素都必须被一个标签包裹（一个顶级组件）</li>
<li>不能改变组件状态</li>
<li>不能改变DOM输出 </li>
</ol>
<h2 id="5-componentDidMount"><a href="#5-componentDidMount" class="headerlink" title="5. componentDidMount"></a>5. componentDidMount</h2><p>在服务端渲染的时候该方法不会调用。该方法是在生成真实的DOM之后被调用，所以，在该方法内可以通过<code>ReactDOM.findDOMNode()</code>和 <code>this.refs.[refsName]</code>进行DOM操作。</p>
<h1 id="存在期"><a href="#存在期" class="headerlink" title="存在期"></a>存在期</h1><p>在该阶段主要进行与用户的一些交互行为和更新state（render重新渲染DOM）</p>
<h2 id="1-componentWillReceiveProps"><a href="#1-componentWillReceiveProps" class="headerlink" title="1. componentWillReceiveProps"></a>1. componentWillReceiveProps</h2><p>当组件的props属性的改变是由父组件引起是该方法被调用。</p>
<pre><code class="javascript">    componentWillReceiveProps: function(nextProps){
    if(nextProps.checked !== undefined){
        this.setState({
            checked: nextProps.checked
        })
      }
    }
</code></pre>
<h2 id="2-shouldComponentUpdate"><a href="#2-shouldComponentUpdate" class="headerlink" title="2. shouldComponentUpdate"></a>2. shouldComponentUpdate</h2><p>通过该方法返回true或false来判断state或props改变时，render及componentWillUpdata和componentDidUpdate是否会调用</p>
<pre><code class="javascript">    shouldComponentUpdate: function(nextProps, nextState){
        return this.state.checked === nextState.checked;
    }
</code></pre>
<h2 id="3-componentWillUpdate"><a href="#3-componentWillUpdate" class="headerlink" title="3. componentWillUpdate"></a>3. componentWillUpdate</h2><p>当props和state发生变化时执行，在render方法之前执行(初始化render时不执行该方法)，在这个函数里面，不能使用this.setState来修改状态。这个函数调用之后，就会把nextProps和nextState分别设置到this.props和this.state中。紧接着就会调用render()来更新DOM</p>
<pre><code class="javascript">    componentWillUpdate(object nextProps, object nextState)
</code></pre>
<h2 id="4-componentDidUpdate"><a href="#4-componentDidUpdate" class="headerlink" title="4. componentDidUpdate"></a>4. componentDidUpdate</h2><p>组件更新结束之后执行，在初始化render时不执行</p>
<pre><code class="javascript">    componentDidUpdate(object prevProps, object prevState)
</code></pre>
<h1 id="销毁时"><a href="#销毁时" class="headerlink" title="销毁时"></a>销毁时</h1><h2 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount"></a>componentWillUnmount</h2><p>在 componentDidMount 中添加的任务都需要再该方法中撤销，如创建的定时器或事件监听器。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p> react以上生命周期可以概括为下图：</p>
<p> <img src="/images/reactlifecycle.png" alt=""></p>

      
    
    </div>
    
      
      
  <hr class="copy-line">
  <div class="post-copyright">
    <div class="copy-author">
      <span>作者 :</span>
      <span>Pororo</span>
    </div>
    <div class="copy-url">
      <span>地址 :</span>
      <a href="http://yoursite.com/2017/09/01/react生命周期/">http://yoursite.com/2017/09/01/react生命周期/</a>
    </div>
    <div class="copy-origin">
      <span>来源 :</span>
      <a href="http://yoursite.com">http://yoursite.com</a>
    </div>
    <div class="copy-license">
      
      著作权归作者所有，转载请联系作者获得授权。
    </div>
  </div>

    
  </article>
  
    
  <nav class="article-page">
    
      <a href="/2017/09/02/滚动无限加载的页面渲染优化/" id="art-left" class="art-left">
        <span class="next-title">
          <i class="iconfont icon-left"></i>滚动无限加载的页面渲染优化
        </span>
      </a>
    
    
      <a href="/2017/05/06/JavaScript中的隐式类型转换/" id="art-right" class="art-right">
        <span class="prev-title"> 
          JavaScript中的隐式类型转换<i class="iconfont icon-right"></i>  
        </span>
      </a>
    
  </nav>

    

  
   
    
  
  <aside class="post-toc">
    <span class="title" id="toc-switch"><span>文章导航</span></span>
    <div class="toc-inner syuanpi back-1 fallIn-light">
      <li class="title-link"><a href="javascript:;" class="toTop">react生命周期</a></li>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#实例化阶段"><span class="toc-text">实例化阶段</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-getDefaultProps"><span class="toc-text">1. getDefaultProps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-getInitialState"><span class="toc-text">2. getInitialState</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-componentWillMount"><span class="toc-text">3. componentWillMount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-render"><span class="toc-text">4. render</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-componentDidMount"><span class="toc-text">5. componentDidMount</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#存在期"><span class="toc-text">存在期</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-componentWillReceiveProps"><span class="toc-text">1. componentWillReceiveProps</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-shouldComponentUpdate"><span class="toc-text">2. shouldComponentUpdate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-componentWillUpdate"><span class="toc-text">3. componentWillUpdate</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-componentDidUpdate"><span class="toc-text">4. componentDidUpdate</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#销毁时"><span class="toc-text">销毁时</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#componentWillUnmount"><span class="toc-text">componentWillUnmount</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总结"><span class="toc-text">总结</span></a></li></ol>
    </div>
  </aside>


  


        </div>
      </main>

      <footer class="footer syuanpi fadeIn" id="footer">
  <hr>
  <div class="footer-wrapper">
    <div class="left">
      <div class="contact-icon">
    
    
    
    
    
    
    
    
        
            <a href="https://github.com/pororoj" class="iconfont icon-github" title="github"></a>
        
        
        
        
        
        
        
    
</div>
    </div>
    <div class="right">
      <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2017 ~ 2018</span>
        <span>❤</span>
        <span>Pororo</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
    <div class="visit_count">
        <i class="iconfont icon-visit"></i>
        <span id="busuanzi_value_site_uv"></span>
        <i class="iconfont icon-people"></i>
        <span id="busuanzi_value_site_pv"></span>
    </div>
    
</div>
    </div>
  </div>
</footer>
    </div>
  </div>
  <script src="/script/lib/jquery/jquery-3.2.1.min.js"></script>


    <script src="/script/lib/lightbox/js/lightbox.min.js"></script>






<script src="/script/src/nlvi.js"></script>
<script src="/script/src/utils.js"></script>
<script src="/script/scheme/balance.js"></script>
<script src="/script/src/plugins.js"></script>
<script src="/script/bootstarp.js"></script>


<div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>


  <div class="search" id="search">
    <div class="mask" id="mask"></div>
    <div class="search-wrapper syuanpi">
      <h2 id="search-header" class="syuanpi">搜索一下？</h2>
      <div class="input">
        <input type="text" id="local-search-input" results="0" name="">
      </div>
      <div id="local-search-result"></div>
    </div>
  </div>
  <script>
  if (NlviConfig.theme === 'banderole') {
    var GREETING = {
      morning: "早早早！记得吃早饭~",
      noon: "中午好！记得午休~",
      after: "下午好！记得吃下午茶啊~",
      night: "晚上好！记得放松一下~",
      midnight: "赶紧休息啦！少熬夜~"
    }
  }
  </script>

</body>
</html>
